angular.module("app",["ionic","gdi2290.md5-service"]);var app=angular.module("app");app.controller("actionCtrl",function($scope){}),app.controller("slideCtrl",function($scope){}),app.controller("loginCtrl",function($scope){}),app.directive("appMain",function(){return{restrict:"E",scope:{},templateUrl:"components/main/main.html",controller:"mainCtrl"}}),app.directive("appAction",function(){return{restrict:"E",scope:!0,templateUrl:"components/action.html",controller:"actionCtrl"}}),app.directive("appSlide",function(){return{restrict:"E",scope:!0,templateUrl:"components/slideBox.html",controller:"slideCtrl"}}),app.directive("appLogin",function(){return{restrict:"E",scope:!0,templateUrl:"components/login.html",controller:"loginCtrl"}}),document.createElement("app-main"),document.createElement("app-action"),document.createElement("app-slide"),document.createElement("app-login");var app=angular.module("app");app.controller("birthdayCtrl",function($scope,locals){locals.set("lastUrl","indexHome")}),angular.module("app").controller("doctorCtrl",function(locals){locals.set("lastUrl","indexHome")});var app=angular.module("app");app.controller("habitCtrl",function($scope,locals){locals.set("lastUrl","indexHome")});var app=angular.module("app");app.controller("indexHomeCtrl",function($ionicScrollDelegate,$scope,$state,$ionicViewSwitcher,$ionicSideMenuDelegate,locals,ary,demo,gradeColor,ui){var vm=$scope.vm={cutNum:0,cutNum1:0,timer:[],action:[],activeSlide:0,Search:!1,popFt:!0,four:[{},{},{},{}],timer1:demo.sunpengtao.timer,actions:ary.actions,bannerUrl:"background-image:url('img/jpg/banner1.jpg')",home:[{name:"大厅",num:"0"},{name:"书房",num:"1"},{name:"卧室",num:"2"},{name:"厨房",num:"3"}],leftAction:[{src:"ic_test",name:"暂定功能",url:"search"},{src:"ic_test",name:"暂定功能",url:"search"},{src:"ic_test",name:"暂定功能",url:"search"},{src:"ic_test",name:"暂定功能",url:"search"}],pDom:document.getElementsByClassName("controllerBox")[0].getElementsByTagName("p"),goActions:function(url){$state.go(url)},controllerBox:function(num){if(num!=vm.cutNum1){var num1;vm.cutNum1=num1=parseInt(num);for(var i=0;i<4;i++)vm.pDom[i].style.fontSize="16px",vm.pDom[i].style.fontWeight="normal";vm.pDom[num1].style.fontSize="18px",vm.pDom[num1].style.fontWeight="bold",vm.bannerUrl="background-image:url('img/jpg/banner"+(num1+1)+".jpg')",vm.styleBox="left:"+25*num1+"%",vm.activeSlide=num1}},actionBox:function(index){vm.action=[];for(var i=0;i<vm.actions.length;i++)vm.actions[i].type==index&&vm.action.push(vm.actions[i])},slideHasChanged:function(index){vm.controllerBox(index),vm.actionBox(index),$ionicScrollDelegate.$getByHandle("leftScroll").scrollTo(0,0,[!0])},avatar:function(){if(null==locals.get("login")||void 0==locals.get("login"))return void $state.go("login");0==vm.cutNum?(vm.popFt=!1,vm.cut="left:230px;transform:scale(0.8,0.8);",vm.cut1="transform:scale(0.9,0.9);left:40px;top:85px",vm.cut2="background-color:#84c0f2",vm.cutNum++,vm.leftActionLi(1)):(vm.popFt=!0,vm.cut=vm.cut1=vm.cut2="",vm.cutNum=0,vm.leftActionLi(0))},leftActionLi:function(num){var left,leftNum=$(".leftActionLi").size();left=num?"0px":"-300px";for(var i=0;i<leftNum;i++)$(".leftActionLi").eq(i).css({transition:"0.4s all "+.1*(i+1)+"s",left:left})},close:function(tittle,cont,url){vm.avatar(),ui._confirm(tittle,cont,url,function(){locals.set("login",null)})}};vm.actionBox(0);for(var i=0;i<vm.timer1.length;i++)vm.timer1[i].color=gradeColor(vm.timer1[i].eventGrade),vm.timer.push(vm.timer1[i]);$scope.$on("onRepeatFinished",function(){vm.leftActionLi()})});var app=angular.module("app");app.controller("infoCtrl",function($scope){$scope.vm={name:"孙鹏涛"}}),angular.module("app").controller("manageCtrl",function(locals){locals.set("lastUrl","indexHome")}),angular.module("app").controller("repaymentCtrl",function(locals){locals.set("lastUrl","indexHome")});var app=angular.module("app");app.controller("searchCtrl",function($scope,$state,locals,ary,search,ui,equals,alertCont){var vm=$scope.vm={searchCont:"",showSearchCont:!0,actions:ary.actions,searchResult:!0,input:document.getElementById("text"),goActions:function(url){$state.go(url)},getSearchCont:function(){vm.commonCont=locals.get("commonSearch"),null==vm.commonCont?(vm.searchCont="无搜索记录",vm.showSearchCont=!0):(vm.searchCont=vm.commonCont,vm.showSearchCont=!1)}};setTimeout(function(){angular.element(document.getElementById("text")).focus()},700),vm.getSearchCont(),vm.search=function(type){function getResult(){vm.action=search(vm.actions,"name",vm.value)}if("clear"==type)return locals.remove("commonSearch"),void vm.getSearchCont();if(type)return vm.input.value=type,vm.value=vm.input.value,void getResult();var value;vm.value=vm.input.value,alertCont._null(vm.value)||(value={name:vm.value},"无搜索记录"!=vm.searchCont?equals(vm.searchCont,"name",vm.value)||locals.set("commonSearch",value,"add"):locals.set("commonSearch",value,"add"),getResult(),vm.getSearchCont())},locals.set("lastUrl","indexHome")});var app=angular.module("app");app.controller("studyPlanCtrl",function($scope,locals){locals.set("lastUrl","indexHome")});var app=angular.module("app");app.controller("timerCtrl",function($scope){$scope.vm={name:"孙鹏涛"}}),angular.module("app").controller("womanCtrl",function(locals){locals.set("lastUrl","indexHome")});var app=angular.module("app");app.filter("actionStatus",function(){return function(value){return null==value||void 0==value?value:"Y"==value?"启用":"N"==value?"未启用":"D"==value?"删除":void 0}}),app.filter("trialState",function(){return function(value){return null==value||void 0==value?value:"0"==value?"未运行":"1"==value?"运行中":"2"==value?"已停止":"3"==value?"已发布":"4"==value?"删除":void 0}});var app=angular.module("app");app.controller("mainCtrl",function($scope,$state,$window,$ionicActionSheet,$ionicViewSwitcher,locals,moreBut){var vm=$scope.vm={tittle:"",oneClass:!0,configCont:$scope.$on("$stateChangeSuccess",function(event,state){vm.oldUrl=state.name,vm.tittle=state.tittle,vm.header=state.header,vm.footer=state.footer,vm.iconLeft=state.iconLeft,vm.more=state.more,vm.cut=vm.cut1="display:none;";var cont="display:block;opacity:0;";vm.cut1=cont+"top:-10px",vm.cut=cont+"top:0px",setTimeout(function(){var cont2="opacity:1;transition:0.5s all;";vm.cut1=cont2+"top:0px",vm.cut=cont2+"top:10px"},10)}),goback:function(){var url=locals.get("lastUrl");void 0!==url?$state.go(url):$state.go("indexHome")},munClass:function(num){vm.oneClass=vm.twoClass=vm.threeClass=!1,"one"==num?vm.oneClass=!0:"two"==num?vm.twoClass=!0:vm.threeClass=!0}};vm.clickMore=function(){moreBut(vm.tittle)},$state.go("login"),$ionicViewSwitcher.nextDirection("none")});var app=angular.module("app");app.controller("accountCtrl",function($scope,locals){$scope.vm={};locals.set("lastUrl","login")});var app=angular.module("app");app.controller("loginsCtrl",function($scope,$state,ui,alertCont,inputReg,locals,equals,getTime){var vm=$scope.vm={butCont:"登录",protocolSure:"ic_sure2",butStyles:["top:350px","top:420px","top:420px"],butConts:["登录","注册","设置"],activeSlides:[0,1,2],begins:[0,2,6],lasts:[2,6,10],lens:[2,4,4],recoveryNum:0,prompts:["请输入6-16位英文或数字","密码不相同"],inputCont:[[{src:"ic_userName",cont:"请输入登录账号",type:"text"},{src:"ic_passWorld",cont:"请输入登录密码",type:"password"}],[{src:"ic_userName",cont:"请输入登录账号",type:"text"},{src:"ic_passWorld",cont:"请输入登录密码",type:"password"},{src:"ic_surePassWorld",cont:"确认登录密码",type:"password"},{src:"ic_123Code",cont:"输入安全码(找回密码用)",type:"password"}],[{src:"ic_userName",cont:"请输入要找回的账号",type:"text"},{src:"ic_123Code",cont:"请输入安全码",type:"password"},{src:"ic_passWorld",cont:"请输入新的登录密码",type:"password"},{src:"ic_surePassWorld",cont:"确认新的登录密码",type:"password"}]],sureBut:function(){"ic_sure2"==vm.protocolSure?vm.protocolSure="ic_sure1":vm.protocolSure="ic_sure2"},succeed:function(type,ind){function cut(index,index1){vm.pmt[index].css({right:"0"}).text(vm.prompts[index1])}function cut1(index){return vm.value[index].val()}var begen,last,num=0,num1=0;if(void 0!=ind)begen=ind,last=ind+1;else{for(i in vm.value){if(1==num)return;alertCont._null(cut1(i))&&(num=1)}begen=0,last=vm.value.length}for(var i=begen;i<last;i++)0==num&&(inputReg.numEnglish(cut1(i))?""!=cut1(i)&&(cut(i,0),num1=1):"注册"==type&&2==i&&cut1(1)!=cut1(2)||"设置"==type&&3==i&&cut1(2)!=cut1(3)?"注册"==type?cut(2,1):cut(3,1):function(index){vm.pmt1[index].css({right:"0"})}(i));if(void 0==ind&&0==num1&&0==num){var aryName=equals(locals.get("user"),"userName",cut1(0));if(console.log(aryName),"登录"==type)return void(aryName&&aryName[0].password==cut1(1)?(locals.set("login",aryName),$state.go("indexHome")):ui._alert("提示","用户名或密码错误"));if("注册"==type&&cut1(1)!=cut1(2))return void cut(2,1);if("注册"==type)return aryName?void ui._alert("提示","用户名已存在"):"ic_sure2"!=vm.protocolSure?void ui._alert("提示","拒绝注册协议"):(locals.set("user",{userName:cut1(0),password:cut1(2),Code123:cut1(3),timeCode:getTime.now()},1),locals.set("login",{userName:cut1(0),password:cut1(2),Code123:cut1(3),timeCode:getTime.now()}),void ui._alert("恭喜注册成功","<p class='ta_l f_12 pd_15'>注册信息:<br/>1 .账号: <span class='cl_r'> "+cut1(0)+"</span><br/>2 .密码: <span class='cl_r'> "+cut1(1)+"</span><br/>2.安全码: <span class='cl_r'>"+cut1(3)+" </span><span class='d_b'><i class='f_r'>请牢记</i></span><p>","indexHome",function(){vm.recoveryPmt(vm.obegin,vm.olast),vm.activeSlide=0}));if("设置"==type&&cut1(2)!=cut1(3))return void cut(3,1);if(aryName){var cont=locals.get("user"),num=0;for(i in cont)if(cont[i].Code123==cut1(1)&&cont[i].userName==cut1(0)){var newCode=cont[i].timeCode;cont[i]={userName:cut1(0),password:cut1(3),Code123:cut1(1),timeCode:newCode},num=1}if(0==num)return void ui._alert("提示","用户名或安全码不正确");ui._alert("设置成功","<p class='ta_l f_12 pd_15'>1 .新密码: <span class='cl_r'> "+cut1(3)+"</span><i class='f_r'>请牢记</i></span><p>","",function(){vm.slideHasChanged(0)}),locals.set("user",cont)}else ui._alert("提示","用户名或安全码不正确")}},slideHasChanged:function(index){vm.butStyle=vm.butStyles[index],vm.butCont=vm.butConts[index],vm.activeSlide=vm.activeSlides[index],vm.getDom(vm.begins[index],vm.lasts[index],vm.lens[index])},inputFocus:function(ind,type){function back(ind){vm.pmt[ind].css({right:"-140px"}),vm.pmt1[ind].css({right:"-40px"})}back(ind),"注册"==type&&1==ind&&back(ind+1),"设置"==type&&2==ind&&back(ind+1)},recoveryPmt:function(begin,last){vm.recoveryNum++;for(var i=begin;i<last;i++)vm.recoveryNum>4&&$(".val").eq(i).val("").blur(),$(".prompt").css({right:"-140px"}),$(".prompt1").css({right:"-40px"})},getDom:function(begin,last,len){vm.recoveryPmt(vm.obegin,vm.olast),vm.value=[],vm.pmt=[],vm.pmt1=[];for(var i=begin,j=0;j<len;i++,j++)vm.value[j]=$(".val").eq(i),vm.pmt[j]=$(".prompt").eq(i),vm.pmt1[j]=$(".prompt1").eq(i);vm.obegin=begin,vm.olast=last}};$scope.$on("onRepeatFinished",function(){vm.getDom(0,2,2)})}),angular.module("app").controller("protocolCtrl",function($scope,locals){$scope.vm={};locals.set("lastUrl","login")});var app=angular.module("app");app.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("default",{url:"",controller:function($scope,$state,locals){locals.get("login")?$state.go("indexHome"):$state.go("login")}}).state("indexHome",{url:"/controllers/indexHome",tittle:"客厅",cache:!1,footer:!0,views:{"":{templateUrl:"controllers/indexHome.html",controller:"indexHomeCtrl"}}}).state("info",{url:"/controllers/info",tittle:"数据统计",footer:!0,cache:!1,views:{"":{templateUrl:"controllers/info.html",controller:"infoCtrl"}}}).state("login",{url:"/controllers/login/login",tittle:"登录",cache:!1,views:{"":{templateUrl:"controllers/login/login.html",controller:"loginsCtrl"}}}).state("protocol",{url:"/controllers/login/protocol",tittle:"注册协议",header:!0,cache:!1,views:{"":{templateUrl:"controllers/login/protocol.html",controller:"protocolCtrl"}}}).state("timer",{url:"/controllers/timer",tittle:"时间轴",footer:!0,cache:!1,views:{"":{templateUrl:"controllers/timer.html",controller:"timerCtrl"}}}).state("search",{url:"/controllers/search",tittle:"搜索",cache:!1,header:!0,views:{"":{templateUrl:"controllers/search.html",controller:"searchCtrl"}}}).state("account",{url:"/controllers/account/account",tittle:"个人流水",cache:!1,header:!0,more:!0,views:{"":{templateUrl:"controllers/account/account.html",controller:"accountCtrl"}}}).state("birthday",{url:"/controllers/birthday",tittle:"生日提醒",header:!0,cache:!1,views:{"":{templateUrl:"controllers/birthday.html",controller:"birthdayCtrl"}}}).state("habit",{url:"/controllers/habit",tittle:"习惯养成",header:!0,cache:!1,views:{"":{templateUrl:"controllers/habit.html",controller:"habitCtrl"}}}).state("studyPlan",{url:"/controllers/studyPlan",tittle:"学习计划",header:!0,cache:!1,views:{"":{templateUrl:"controllers/studyPlan.html",controller:"studyPlanCtrl"}}}).state("doctor",{url:"/controllers/doctor",tittle:"私人医生",header:!0,cache:!1,views:{"":{templateUrl:"controllers/doctor.html",controller:"doctorCtrl"}}}).state("woman",{url:"/controllers/woman",tittle:"女生",header:!0,cache:!1,views:{"":{templateUrl:"controllers/woman.html",controller:"womanCtrl"}}}).state("manage",{url:"/controllers/manage",tittle:"理财计算器",header:!0,cache:!1,views:{"":{templateUrl:"controllers/manage.html",controller:"manageCtrl"}}}).state("repayment",{url:"/controllers/repayment",tittle:"定期还款",header:!0,cache:!1,views:{"":{templateUrl:"controllers/repayment.html",controller:"repaymentCtrl"}}}),$urlRouterProvider.otherwise("controllers/indexHome")}),angular.module("app").constant("ary",{actions:[{name:"个人流水",src:"ic_account",url:"account",type:"0"},{name:"生日提醒",src:"ic_birthday",url:"birthday",type:"0"},{name:"私人医生",src:"ic_doctor",url:"doctor",type:"3"},{name:"习惯养成",src:"ic_habit",url:"habit",type:"0"},{name:"学习计划",src:"ic_studyPlan",url:"studyPlan",type:"1"},{name:"女生",src:"ic_woman",url:"woman",type:"2"},{name:"理财计算器",src:"ic_manage",url:"manage",type:"2"},{name:"定期还款",src:"ic_repayment",url:"repayment",type:"0"},{name:"生日提醒",src:"ic_birthday",url:"birthday",type:"0"},{name:"私人医生",src:"ic_doctor",url:"doctor",type:"3"},{name:"习惯养成",src:"ic_habit",url:"habit",type:"0"},{name:"学习计划",src:"ic_studyPlan",url:"studyPlan",type:"1"},{name:"女生",src:"ic_woman",url:"woman",type:"2"},{name:"理财计算器",src:"ic_manage",url:"manage",type:"2"},{name:"定期还款",src:"ic_repayment",url:"repayment",type:"0"}]}),angular.module("app").constant("demo",{sunpengtao:{timer:[{eventTime:"2小时21分钟",eventName:"信用卡还款323233232",eventGrade:"1",code:"23231"},{eventTime:"3小时1分钟",eventName:"生日323233232",eventGrade:"2",code:"23232"},{eventTime:"5小时2分钟",eventName:"参加例会323232323232",eventGrade:"3",code:"23243"},{eventTime:"1天2小时09分钟",eventName:"交友23232323",eventGrade:"4",code:"43324"},{eventTime:"1月20天12小时32分钟",eventName:"房租232323",eventGrade:"2",code:"87633"}]}});var app=angular.module("app");app.factory("locals",["$window",function(){return{set:function(key,value,add){function setlocal(key,value){localStorage.setItem(key,JSON.stringify(value))}function getlocal(key){return JSON.parse(localStorage.getItem(key))}if(add){if(0==(null!=getlocal(key))){var empty=[];empty.push(value),setlocal(key,empty)}else{var Old=getlocal(key);Old.push(value),setlocal(key,Old)}}else setlocal(key,value)},get:function(key){return JSON.parse(localStorage.getItem(key))},remove:function(key){localStorage.removeItem(key)}}}]),app.service("gradeColor",function(){return function(num){switch(num){case"1":return"bc_b";case"2":return"bc_y1";case"3":return"bc_o";case"4":return"bc_r";default:return"bc_b"}}}),app.service("search",function(){return function(array,obj,value){if(void 0!=array){for(var len=array.length,arr=[],i=0;i<len;i++)obj?array[i][obj].indexOf(value)>=0&&arr.push(array[i]):array[i].indexOf(value)>=0&&arr.push(array[i]);return 0!=arr.length&&arr}return!1}}),app.service("equals",function(){return function(array,obj,value){if(void 0!=array||null!=array){var arr=[],num=0;return array.map(function(item){item[obj]==value&&(num=1,arr.push(item))}),0!=num&&arr}return!1}}),app.service("getTime",function(){function one(num){return num<10?"0"+num:num}return time=new Date,hours=time.getHours(),minutes=time.getMinutes(),seconds=time.getSeconds(),year=time.getFullYear(),month=time.getMonth()+1,date=time.getDate(),day=time.getDay(),{now:function(){return""+year+one(month)+one(date)+one(hours)+one(minutes)+one(seconds)},clocks:function(){return one(hours)+":"+one(minutes)+":"+one(seconds)},part:function(){return hours>=0&&hours<=5?"深夜了，应该熟睡":hours>6&&hours<=9?"早上好":hours>9&&hours<=11?"上午好":hours>11&&hours<=14?"中午好":hours>14&&hours<=20?"下午好":hours>20&&hours<24?"晚上好":void 0}}}),app.factory("inputReg",function(){return{numEnglish:function(value){return!/^[0-9a-zA-Z]{6,16}$/.test(value)}}}),app.directive("onRepeatFinish",function(){return{link:function(scope,element,attr){1==scope.$last&&scope.$emit("onRepeatFinished")}}});var app=angular.module("app");app.service("http",function($http,$q,ui,waiting){function errorMsg(body){if(""!=body.errorMsg)return ui._alert("提示",body.errorMsg),!1}function intercept(data,Status){var statuNum=(""+Status).substr(0,1);return"4"!=statuNum&&"-"!=statuNum||ui._alert("提示","断开与服务器连接"),"5"==statuNum&&ui._alert("提示","后台报错"),!1}this.post=function(url,params,isintercept){return request("POST",url,params,isintercept)};var request=function(method,url,param,isintercept){var defered=$q.defer();return waiting.open(),$http({method:method,url:url,data:{header:{type:"J"},body:param},headers:{contentType:"application/json"},timeout:3e3,responseType:"json"}).success(function(data){var body=data.body;void 0==isintercept&&!1===errorMsg(body)||defered.resolve(data)}).error(function(data,Status){void 0==isintercept&&!1===intercept(data,Status)||defered.reject(data)}),defered.promise}});var app=angular.module("app");app.factory("ui",function($ionicPopup,$state){return{_alert:function(title,cont,url,backcall){$ionicPopup.alert({title:title,template:cont,cancelText:"取消",okText:"确定"}).then(function(res){res&&(backcall&&backcall(),url&&$state.go(url))})},_confirm:function(title,cont,url,backcall){$ionicPopup.confirm({title:title,template:cont,cancelText:"取消",okText:"确定"}).then(function(res){res&&(backcall&&backcall(),url&&$state.go(url))})}}}),app.factory("alertCont",function(ui){return{_null:function(value){return(""==value||null==value)&&(ui._alert("提示","输入内容不能为空"),!0)}}}),app.service("moreBut",function($ionicActionSheet,$state){return function(tle){var h1={"个人流水":{buttons:[{text:"高级功能"},{text:"智能提醒"}],url:[{go:"indexHome"},{go:"indexHome"}]},"不告诉你":{buttons:[{text:"高级功能"},{text:"智能提醒"}],url:[{go:"indexHome"},{go:"indexHome"}]}};$ionicActionSheet.show({buttons:h1[tle].buttons,cancelText:"取消",buttonClicked:function(index){$state.go(h1[tle].url[index].go)}})}});